<!doctype html><html><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><meta http-equiv=Accept-CH content="DPR, Viewport-Width, Width"><link rel=icon href=/fav.png type=image/gif><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" media=print onload='this.media="all"'><noscript><link href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel=stylesheet></noscript><link rel=stylesheet href=/css/font.css media=all><meta property="og:url" content="http://www.gordonburgett.net/archive/2015/01_which-which/"><meta property="og:site_name" content="Gordon Burgett | Director of Technology Development"><meta property="og:title" content="which which?"><meta property="og:description" content="I’m using locomotivecms for a project I’m working on, and it uses ImageMagick for resizing pictures on the fly. The standard instructions say to use the bitnami Ruby stack installer to get everything you need in a nice neat bundle.
That worked for me for a while, until I needed to update the version of ruby I’m using. So, I went through the long and painful process of uninstalling the ruby stack, installing each component individually, identifying and correcting a ton of minor problems, and finally squashed the last bug by writing this program."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="archive"><meta property="article:published_time" content="2015-01-06T22:49:08+01:00"><meta property="article:modified_time" content="2015-01-06T22:49:08+01:00"><meta property="article:tag" content="Development"><meta property="article:tag" content="Golang"><meta name=twitter:card content="summary"><meta name=twitter:title content="which which?"><meta name=twitter:description content="I’m using locomotivecms for a project I’m working on, and it uses ImageMagick for resizing pictures on the fly. The standard instructions say to use the bitnami Ruby stack installer to get everything you need in a nice neat bundle.
That worked for me for a while, until I needed to update the version of ruby I’m using. So, I went through the long and painful process of uninstalling the ruby stack, installing each component individually, identifying and correcting a ton of minor problems, and finally squashed the last bug by writing this program."><link rel=stylesheet href=/bootstrap-5/css/bootstrap.min.css media=all><link rel=stylesheet href=/css/header.css media=all><link rel=stylesheet href=/css/footer.css media=all><link rel=stylesheet href=/css/theme.css media=all><style>:root{--text-color:#343a40;--text-secondary-color:#6c757d;--text-link-color:#007bff;--background-color:#eaedf0;--secondary-background-color:#64ffda1a;--primary-color:#007bff;--secondary-color:#f8f9fa;--text-color-dark:#e4e6eb;--text-secondary-color-dark:#b0b3b8;--text-link-color-dark:#ffffff;--background-color-dark:#18191a;--secondary-background-color-dark:#212529;--primary-color-dark:#ffffff;--secondary-color-dark:#212529}body{font-size:1rem;font-weight:400;line-height:1.5;text-align:left}html{background-color:var(--background-color)!important}body::-webkit-scrollbar{height:0;width:8px;background-color:var(--background-color)}::-webkit-scrollbar-track{border-radius:1rem}::-webkit-scrollbar-thumb{border-radius:1rem;background:#b0b0b0;outline:1px solid var(--background-color)}#search-content::-webkit-scrollbar{width:.5em;height:.1em;background-color:var(--background-color)}</style><link rel=stylesheet href=/css/custom.css type=text/css><script src=/js/custom.js type=text/javascript></script><meta name=description content><link rel=stylesheet href=/css/single.css><script defer src=/fontawesome-6/all-6.4.2.js></script><link rel=stylesheet href=/style.css><title>which which? | Gordon Burgett | Director of Technology Development</title></head><body class=light><script>let localStorageValue=localStorage.getItem("pref-theme"),mediaQuery=window.matchMedia("(prefers-color-scheme: dark)").matches;switch(localStorageValue){case"dark":document.body.classList.add("dark");break;case"light":document.body.classList.remove("dark");break;default:mediaQuery&&document.body.classList.add("dark");break}</script><header id=profileHeader><nav class="pt-3 navbar navbar-expand-lg animate"><div class="container-fluid mx-xs-2 mx-sm-5 mx-md-5 mx-lg-5"><a class="navbar-brand primary-font text-wrap" href=/>Gordon Burgett
</a><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarContent aria-controls=navbarContent aria-expanded=false aria-label="Toggle navigation"><svg aria-hidden="true" height="24" viewBox="0 0 16 16" width="24" data-view-component="true"><path fill-rule="evenodd" d="M1 2.75A.75.75.0 011.75 2h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 2.75zm0 5A.75.75.0 011.75 7h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 7.75zM1.75 12a.75.75.0 100 1.5h12.5a.75.75.0 100-1.5H1.75z"/></svg></button><div class="collapse navbar-collapse text-wrap primary-font" id=navbarContent><ul class="navbar-nav ms-auto text-center"><li class="nav-item navbar-text"><a class=nav-link href=/#projects aria-label=projects>Projects</a></li><li class="nav-item navbar-text"><a class=nav-link href=/posts title="Blog posts">Blog</a></li><li class="nav-item navbar-text"><a class=nav-link href=/albania title=Albania>Albania</a></li><li class="nav-item navbar-text"><a class=nav-link href=/archive title=Archive>Archive</a></li><li class="nav-item navbar-text"><div class=text-center><button id=theme-toggle><svg id="moon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></li></ul></div></div></nav></header><div id=content><section id=single><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-md-12 col-lg-9"><div class=pr-lg-4><div class="title mb-5"><h1 class="text-center mb-4">which which?</h1><div class=text-center>Jan 6, 2015
<span id=readingTime>min read</span></div></div><article class="page-content p-2"><p>I&rsquo;m using <a href=http://locomotivecms.com/>locomotivecms</a> for a project I&rsquo;m working on, and it uses <a href=http://www.imagemagick.org/>ImageMagick</a> for resizing pictures on the fly. The <a href=http://doc.locomotivecms.com/get-started/install-wagon#windows>standard instructions</a> say to use the bitnami Ruby stack installer to get everything you need in a nice neat bundle.</p><p>That worked for me for a while, until I needed to update the version of ruby I&rsquo;m using. So, I went through the long and painful process of uninstalling the ruby stack, installing each component individually, identifying and correcting a ton of minor problems, and finally squashed the last bug by writing this program.</p><p>Essentially, the command <code>bundle exec wagon serve</code> looks up the location of ImageMagick&rsquo;s <code>convert.exe</code> program by invoking <code>which convert</code>, which only works on linux systems, or if you&rsquo;re using a port like unxutils. So, once I got ruby working and was self-hosting my site for development, none of my resized images were showing up. The console showed this error message:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>which: no convert in <span style=color:#f92672>(</span>...;C:<span style=color:#ae81ff>\P</span>rogram Files<span style=color:#ae81ff>\I</span>mageMagick-6.9.0-Q16;...<span style=color:#f92672>)</span>
</span></span></code></pre></div><p>So GNU which v2.4 for some reason can&rsquo;t find convert.exe inside the ImageMagick install. After playing with it, I found that <code>which convert.exe</code> worked, but <code>which convert</code> didn&rsquo;t. Very lame.</p><h3 id=-cause-i-still-havent-found-what-im-looking-for->♪ Cause I still haven&rsquo;t found what I&rsquo;m looking for&mldr; ♪</h3><p>The next couple hours were an adventure in dirty hacks. First I tried removing GNU which off the path, and using MSYS which. MSYS which is a shell script, so I made a batch file wrapper to invoke it using MSYS sh. That could find the file, but it resulted in a unix-style path: <code>/c/Program Files/ImageMagick-6.9.0-Q16/convert</code>. Since wagon is feeding this path directly into a <code>cmd /c</code> invocation, it wasn&rsquo;t good enough.</p><p>After unsuccessfully playing with writing a batch script to invoke <code>where</code>, I decided to write a clone of <code>which</code> in go. This accomplished two objectives: fix my locomotivecms install, and learn go. The requirements are very simple, the command <code>which convert</code> should return a string that can be passed to <code>cmd /c</code> to invoke ImageMagick&rsquo;s convert.exe.</p><p>It took me 2-3 hours to do, but here is my first complete go program! <a href=https://github.com/gburgett/which>https://github.com/gburgett/which</a></p></article></div></div><div class="col-sm-12 col-md-12 col-lg-3"><div id=stickySideBar class=sticky-sidebar><aside class=toc><h5>Table Of Contents</h5><div class=toc-content><nav id=TableOfContents><ul><li><ul><li><a href=#-cause-i-still-havent-found-what-im-looking-for->♪ Cause I still haven&rsquo;t found what I&rsquo;m looking for&mldr; ♪</a></li></ul></li></ul></nav></div></aside><aside class=tags><h5>Tags</h5><ul class="tags-ul list-unstyled list-inline"><li class=list-inline-item><a href=http://www.gordonburgett.net/tags/development target=_blank>Development</a></li><li class=list-inline-item><a href=http://www.gordonburgett.net/tags/golang target=_blank>golang</a></li></ul></aside><aside class=social><h5>Social</h5><div class=social-content><ul class=list-inline><li class="list-inline-item text-center"><a target=_blank href="https://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2fwww.gordonburgett.net%2farchive%2f2015%2f01_which-which%2f"><i class="fab fa-linkedin"></i></a></li><li class="list-inline-item text-center"><a target=_blank href="https://twitter.com/share?text=which%20which%3f&url=http%3a%2f%2fwww.gordonburgett.net%2farchive%2f2015%2f01_which-which%2f"><i class="fab fa-twitter"></i></a></li><li class="list-inline-item text-center"><a target=_blank href="https://api.whatsapp.com/send?text=which%20which%3f: http%3a%2f%2fwww.gordonburgett.net%2farchive%2f2015%2f01_which-which%2f"><i class="fab fa-whatsapp"></i></a></li><li class="list-inline-item text-center"><a target=_blank href='mailto:?subject=which%20which%3f&amp;body=Check%20out%20this%20site http%3a%2f%2fwww.gordonburgett.net%2farchive%2f2015%2f01_which-which%2f'><i class="fa fa-envelope"></i></a></li></ul></div></aside></div></div></div><div class=row><div class="col-sm-12 col-md-12 col-lg-9 p-4"></div></div></div><button class="p-2 px-3" onclick=topFunction() id=topScroll>
<i class="fas fa-angle-up"></i></button></section><div class=progress><div id=scroll-progress-bar class=progress-bar role=progressbar aria-valuenow=0 aria-valuemin=0 aria-valuemax=100></div></div><script src=/js/scrollProgressBar.js></script><script>var topScroll=document.getElementById("topScroll");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?topScroll.style.display="block":topScroll.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}let stickySideBarElem=document.getElementById("stickySideBar"),stickyNavBar=!1;if(stickyNavBar){let e=document.getElementById("profileHeader"),t=e.offsetHeight+15;stickySideBarElem.style.top=t+"px"}else stickySideBarElem.style.top="50px"</script><script src=/js/readingTime.js></script></div><footer><div class="text-center pt-2"></div><div class="container py-4"><div class="row justify-content-center"><div class="col-md-4 text-center">&copy; 2024 All Rights Reserved<div class=text-secondary>Made with
<span class=text-danger>&#10084;
</span>and
<a href=https://github.com/gurusabarish/hugo-profile target=_blank title="Designed and developed by gurusabarish">Hugo Profile</a></div></div></div></div></footer><script src=/bootstrap-5/js/bootstrap.bundle.min.js></script><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))});var tooltipTriggerList=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')),tooltipList=tooltipTriggerList.map(function(e){return new bootstrap.Tooltip(e)})</script><section id=search-content class=py-2><div class=container id=search-results></div></section></body></html>