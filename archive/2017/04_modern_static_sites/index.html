<!doctype html><html><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><meta http-equiv=Accept-CH content="DPR, Viewport-Width, Width"><link rel=icon href=/fav.png type=image/gif><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" media=print onload='this.media="all"'><noscript><link href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel=stylesheet></noscript><link rel=stylesheet href=/css/font.css media=all><meta property="og:url" content="http://www.gordonburgett.net/archive/2017/04_modern_static_sites/"><meta property="og:site_name" content="Gordon Burgett | Director of Technology Development"><meta property="og:title" content="Modern Static Sites"><meta property="og:description" content="Today in 2017, there are a thousand and one different ways to build a website. As always there’s good old fashioned Wordpress, and of course there’s drag-n-drop website builders like Wix. One thing these have in common is that they need a traditional hosting environment, and for that you gotta pay.
If you can manage it, the cheapest way to host a website nowadays is to create a static HTML site. But don’t hand-craft HTML, that’s hard and boring. Use a static site generator, for fun and profit!"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="archive"><meta property="article:published_time" content="2017-04-20T13:49:22+02:00"><meta property="article:modified_time" content="2017-04-20T13:49:22+02:00"><meta property="article:tag" content="Development"><meta property="article:tag" content="Hugo"><meta property="article:tag" content="Javascript"><meta name=twitter:card content="summary"><meta name=twitter:title content="Modern Static Sites"><meta name=twitter:description content="Today in 2017, there are a thousand and one different ways to build a website. As always there’s good old fashioned Wordpress, and of course there’s drag-n-drop website builders like Wix. One thing these have in common is that they need a traditional hosting environment, and for that you gotta pay.
If you can manage it, the cheapest way to host a website nowadays is to create a static HTML site. But don’t hand-craft HTML, that’s hard and boring. Use a static site generator, for fun and profit!"><link rel=stylesheet href=/bootstrap-5/css/bootstrap.min.css media=all><link rel=stylesheet href=/css/header.css media=all><link rel=stylesheet href=/css/footer.css media=all><link rel=stylesheet href=/css/theme.css media=all><style>:root{--text-color:#343a40;--text-secondary-color:#6c757d;--text-link-color:#007bff;--background-color:#eaedf0;--secondary-background-color:#64ffda1a;--primary-color:#007bff;--secondary-color:#f8f9fa;--text-color-dark:#e4e6eb;--text-secondary-color-dark:#b0b3b8;--text-link-color-dark:#ffffff;--background-color-dark:#18191a;--secondary-background-color-dark:#212529;--primary-color-dark:#ffffff;--secondary-color-dark:#212529}body{font-size:1rem;font-weight:400;line-height:1.5;text-align:left}html{background-color:var(--background-color)!important}body::-webkit-scrollbar{height:0;width:8px;background-color:var(--background-color)}::-webkit-scrollbar-track{border-radius:1rem}::-webkit-scrollbar-thumb{border-radius:1rem;background:#b0b0b0;outline:1px solid var(--background-color)}#search-content::-webkit-scrollbar{width:.5em;height:.1em;background-color:var(--background-color)}</style><link rel=stylesheet href=/css/custom.css type=text/css><script src=/js/custom.js type=text/javascript></script><meta name=description content><link rel=stylesheet href=/css/single.css><script defer src=/fontawesome-6/all-6.4.2.js></script><link rel=stylesheet href=/style.css><title>Modern Static Sites | Gordon Burgett | Director of Technology Development</title></head><body class=light><script>let localStorageValue=localStorage.getItem("pref-theme"),mediaQuery=window.matchMedia("(prefers-color-scheme: dark)").matches;switch(localStorageValue){case"dark":document.body.classList.add("dark");break;case"light":document.body.classList.remove("dark");break;default:mediaQuery&&document.body.classList.add("dark");break}</script><header id=profileHeader><nav class="pt-3 navbar navbar-expand-lg animate"><div class="container-fluid mx-xs-2 mx-sm-5 mx-md-5 mx-lg-5"><a class="navbar-brand primary-font text-wrap" href=/>Gordon Burgett
</a><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarContent aria-controls=navbarContent aria-expanded=false aria-label="Toggle navigation"><svg aria-hidden="true" height="24" viewBox="0 0 16 16" width="24" data-view-component="true"><path fill-rule="evenodd" d="M1 2.75A.75.75.0 011.75 2h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 2.75zm0 5A.75.75.0 011.75 7h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 7.75zM1.75 12a.75.75.0 100 1.5h12.5a.75.75.0 100-1.5H1.75z"/></svg></button><div class="collapse navbar-collapse text-wrap primary-font" id=navbarContent><ul class="navbar-nav ms-auto text-center"><li class="nav-item navbar-text"><a class=nav-link href=/posts title="Blog posts">Blog</a></li><li class="nav-item navbar-text"><a class=nav-link href=/albania title=Albania>Albania</a></li><li class="nav-item navbar-text"><a class=nav-link href=/archive title=Archive>Archive</a></li><li class="nav-item navbar-text"><div class=text-center><button id=theme-toggle><svg id="moon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></li></ul></div></div></nav></header><div id=content><section id=single><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-md-12 col-lg-9"><div class=pr-lg-4><div class="title mb-5"><h1 class="text-center mb-4">Modern Static Sites</h1><div class=text-center>Apr 20, 2017
<span id=readingTime>min read</span></div></div><article class="page-content p-2"><p>Today in 2017, there are a thousand and one different ways to build a website. As always there&rsquo;s good old fashioned <a href=https://wordpress.com>Wordpress</a>, and of course there&rsquo;s drag-n-drop website builders like <a href=http://www.wix.com>Wix</a>. One thing these have in common is that they need a traditional hosting environment, and for that you gotta pay.</p><p>If you can manage it, the cheapest way to host a website nowadays is to create a static HTML site. But don&rsquo;t hand-craft HTML, that&rsquo;s hard and boring. Use a static site generator, for fun and profit!</p><p><a href=/archive/2017/04_modern_static_sites/#now-the-fun-part-spicing-up-the-javascript>Skip over the part about setting up Hugo</a></p><h2 id=building-a-website-the-fun-way>Building a website the fun way</h2><p>There&rsquo;s a whole ton of static site builders out there nowadays, written in all sorts of different languages. This blog is written with <a href=https://gohugo.io>Hugo</a>. Hugo is super easy to install on windows, mac and linux as well as being easy to get started with. If you want a bit more control you can use <a href=https://jekyllrb.com>Jekyll</a> instead and even write custom plugins. The point is to separate out your content from your presentation, so that you can more easily &ldquo;just write&rdquo;, and let the static site generator make your website.</p><h4 id=separate-my-what-from-my-wha>Separate my what from my wha?</h4><p>Every website is made up of 3 parts: Content, Presentation, and Data. In a blog, your Content is your articles, events, images, etc. It&rsquo;s stuff that you upload to present to your readers. Data is things like comments, event regestrations, messages, user-uploaded images. When your readers submit things to you and you have to store them somewhere. Presentation is how you put all those things together to display them. This includes themes, site layout, menus.</p><p>Every website builder needs to deal with those 3 parts and combine them together to display the website. It also needs to allow the content creators (you & your friends/employees) to change the content, and to allow the web designers (you again for your personal blog, or the maintainer of the theme you chose) to edit the HTML and CSS styles. Wordpress solves this problem on the server. Content and Data are pulled from the SQL database and combined with the theme files in order to generate the webpage on request. There&rsquo;s an admin section at <code>/wp-admin</code> which allows anyone with the correct password to change the Content, Data, and Presentation. All of this happens on the web server</p><p>A static site generator does this in a completely different way. First, it does away with the Data part entirely. You can still have a site with Data, but you have to combine the statically-generated site with another service. Then, the Content and Presentation are combined <em>on your laptop</em>. You run the static site generator once, and it produces the resulting HTML, Javascript, and CSS in a folder for you to upload to your web server. No more PHP, no more MySql, you only need Apache.</p><p>A static site is more secure, because the web server doesn&rsquo;t need to receive any Data from the user. It doesn&rsquo;t have a <code>/wp-admin</code> section where a hacker can steal your admin password. It only has an FTP or SSH connection which you use to upload your changes to the server.</p><h4 id=but-then-how-do-you-do-cool-things>But then how do you do cool things?</h4><p>The answer is Javascript. And now that it&rsquo;s 2017, Javascript has gotten to be pretty cool.</p><h3 id=step-1-get-hugo-and-create-a-site>Step 1: get Hugo and create a site.</h3><p><a href=https://gohugo.io>Hugo</a> is a command-line tool. That means you have to open up the Command Prompt to use it. I&rsquo;ll show you how it&rsquo;s done in linux, but all of this applies to Windows too. Go to the downloads page of Hugo and install the version for your system. When you&rsquo;re done you should be able to open the Command Prompt or Terminal and type the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>❯ hugo version  
</span></span><span style=display:flex><span>Hugo Static Site Generator v0.19 linux/amd64 BuildDate: 2017-02-27T13:38:34+01:00
</span></span></code></pre></div><p>Now you can make a new website using the command <code>hugo new site [website name]</code>. This creates a basic hugo site structure. Now you need a theme. Browse to <a href=http://themes.gohugo.io>themes.gohugo.io</a> and download one, then extract it into your themes directory. For example, if you chose the &ldquo;Beautiful Hugo&rdquo; theme, it should go in a folder called &ldquo;beautifulHugo&rdquo; inside the &ldquo;themes&rdquo; directory in your site. Then you need go back to your root folder and change <code>config.toml</code> to use that theme. You can have as many themes as you want in your themes directory, and choose between them in <code>config.toml</code>.</p><p><img alt="hugo new site example" src=/images/modern_static_sites/hugo_new_site.gif></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>❯ ls -l themes/beautifulhugo 
</span></span><span style=display:flex><span>total <span style=color:#ae81ff>40</span>
</span></span><span style=display:flex><span>drwx------ <span style=color:#ae81ff>2</span> gordon gordon <span style=color:#ae81ff>4096</span> Apr <span style=color:#ae81ff>20</span> 14:42 archetypes
</span></span><span style=display:flex><span>drwx------ <span style=color:#ae81ff>3</span> gordon gordon <span style=color:#ae81ff>4096</span> Apr <span style=color:#ae81ff>20</span> 14:42 data
</span></span><span style=display:flex><span>drwx------ <span style=color:#ae81ff>5</span> gordon gordon <span style=color:#ae81ff>4096</span> Apr <span style=color:#ae81ff>20</span> 14:42 exampleSite
</span></span><span style=display:flex><span>drwx------ <span style=color:#ae81ff>2</span> gordon gordon <span style=color:#ae81ff>4096</span> Apr <span style=color:#ae81ff>20</span> 14:42 i18n
</span></span><span style=display:flex><span>drwx------ <span style=color:#ae81ff>2</span> gordon gordon <span style=color:#ae81ff>4096</span> Apr <span style=color:#ae81ff>20</span> 14:42 images
</span></span><span style=display:flex><span>drwx------ <span style=color:#ae81ff>7</span> gordon gordon <span style=color:#ae81ff>4096</span> Apr <span style=color:#ae81ff>20</span> 14:42 layouts
</span></span><span style=display:flex><span>-rw-r--r-- <span style=color:#ae81ff>1</span> gordon gordon <span style=color:#ae81ff>1140</span> Apr <span style=color:#ae81ff>17</span> 05:47 LICENSE
</span></span><span style=display:flex><span>-rw-r--r-- <span style=color:#ae81ff>1</span> gordon gordon <span style=color:#ae81ff>2495</span> Apr <span style=color:#ae81ff>17</span> 05:47 README.md
</span></span><span style=display:flex><span>drwx------ <span style=color:#ae81ff>5</span> gordon gordon <span style=color:#ae81ff>4096</span> Apr <span style=color:#ae81ff>20</span> 14:42 static
</span></span><span style=display:flex><span>-rw-r--r-- <span style=color:#ae81ff>1</span> gordon gordon  <span style=color:#ae81ff>588</span> Apr <span style=color:#ae81ff>17</span> 05:47 theme.toml
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span><span style=color:#a6e22e>languageCode</span> = <span style=color:#e6db74>&#34;en-us&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>title</span> = <span style=color:#e6db74>&#34;My New Hugo Site&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>baseURL</span> = <span style=color:#e6db74>&#34;http://example.org/&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>theme</span> = <span style=color:#e6db74>&#34;beautifulhugo&#34;</span>  <span style=color:#75715e># This should exactly match the name of the folder in your themes directory</span>
</span></span></code></pre></div><p>Now if you run <code>hugo server</code> you can look at a preview of your new site at <code>http://localhost:1313</code>. It should look like this because you have no content:</p><p><img alt="new site image" src=/images/modern_static_sites/new_site.png></p><h3 id=step-2-adding-content-and-images>Step 2: Adding content and images</h3><p><a href=http://gohugo.io/overview/quickstart/>Hugo has a great tutorial</a> on how to build your site and add content. Seriously, read through it. The awesome thing about hugo is that all content is markdown files. Markdown makes it super easy to just write, and you can worry about presentation later.</p><p>All content goes in the <code>content/</code> folder, and the way it is organized within that folder affects where it is on the website. Most websites, especially blogs like this one, have a <code>post/</code> category. For example, this blog post is in the file <code>content/post/2017/04_modern_static_sites.md</code>. <a href=https://github.com/gburgett/blog/blob/master/content/post/2017/04_modern_static_sites.md>Check out the raw content of this post here</a> to see an example. All images are stored in the <code>static/images</code> folder. Then you just reference them with the URL path <code>/images/my_image.jpg</code>. Everything in the <code>static</code> folder actually gets copied directly to the output folder, so you can put anything you want in there.</p><h3 id=step-3-adding-javascript-and-css>Step 3: Adding Javascript and CSS</h3><p>You put your custom CSS and Javascript in the <code>static/</code> folder. The trick now is to reference it. Your theme already references some CSS and JavaScript, and if you want you can override those references. If you name your CSS or JS files the same thing as the theme does, then your files will win. However, then you lose the theme&rsquo;s stylings, which is not good. It&rsquo;s better to override a layout file to include your custom CSS and JS.</p><p>Layouts are how you tell Hugo what HTML to build out of your content. Your theme already comes with layouts though you can always add more. Here we&rsquo;ll override two layouts in order to add our CSS and JS. The &ldquo;beautifulhugo&rdquo; theme has two custom layout files called <code>head_custom.html</code> and <code>footer_custom.html</code> (a different theme will have different layouts, you need to crack open the files and figure out which one you want to override). They are in <code>my-awesome-site/themes/beautifulhugo/layouts/partials/</code>. You need to copy those to the root folder, <code>my-awesome-site/themes/partials/head_custom.html</code> and <code>my-awesome-site/themes/partials/footer_custom.html</code>.</p><p>Now open up those files and add in a reference to your scripts and css. If you want to see a working example, <a href=https://github.com/gburgett/blog/blob/master/layouts/partials/script.html>here is the file I overwrote to add in custom scripts to my blog</a>. My blog uses the hugo-uno theme, so I needed to overwrite the <code>script.html</code> file.</p><h3 id=step-4-building-and-hosting-the-site>Step 4: Building and hosting the site</h3><p>You can host your site anywhere, from a normal host like Hostgator to even <a href=http://www.dropboxwiki.com/tips-and-tricks/host-websites-with-dropbox>exposing a Dropbox folder as a website</a>. If you have an account on Github, they provide &ldquo;Github Pages&rdquo;, which is free hosting for static sites. <a href=https://gohugo.io/tutorials/github-pages-blog/>Hugo even has a tutorial on how to host using Github Pages</a>. This is one of the great reasons to use a static site generator, you can host your website literally anywhere!</p><p>If you have an existing webserver, all you have to do is run the <code>hugo</code> command, then using FTP upload the <code>public/</code> folder to your web server. No PHP or MySql configuration necessary!</p><h2 id=now-the-fun-part---spicing-up-the-javascript>Now the fun part - Spicing up the Javascript</h2><p>The inspiration for this post is <a href=https://crualbaniadigital.gitlab.io>a new website I&rsquo;m working on for CRU Albania</a>. We&rsquo;re using Hugo for that website too, but I wanted to do a little more with the Javascript and CSS. Modern websites don&rsquo;t use raw Javascript and CSS anymore, they use preprocessors and bundlers like <a href=http://sass-lang.com/guide>Sass</a> and <a href=https://webpack.js.org/>Webpack</a>. So instead of writing CSS I&rsquo;ll be writing Sass, and instead of using Javascript I&rsquo;ll be writing <a href=http://www.typescriptlang.org/>Typescript</a>. Now since all of this gets transformed into CSS and Javascript by pre-processors, I can still use it along with Hugo to create a completely static site.</p><p>I started with the <a href=https://github.com/netlify/victor-hugo>victor-hugo template on Github</a>. This template uses <a href=http://gulpjs.com/>Gulp</a> to automate the process of running all the pre-processors, and producing the output. The <a href=https://github.com/netlify/victor-hugo/blob/master/gulpfile.babel.js>provided gulpfile</a> runs Webpack on the &ldquo;js&rdquo; task, and Postcss on the &ldquo;css&rdquo; task. The outputs of those tasks are put directly into the <code>public/</code> folder, the same place where Hugo puts its content. The &ldquo;build&rdquo; task depends on those two tasks and also the &ldquo;hugo&rdquo; task, which calls hugo to build the site into the <code>public/</code> directory. So simply running <code>gulp build</code> combines these pre-processors to build the static site.</p><p><a href=https://gitlab.com/crualbaniadigital/crualbaniadigital.gitlab.io>Follow along with the code on Gitlab</a></p><h4 id=using-sass-to-preprocess-the-css>Using Sass to preprocess the CSS</h4><p>The first thing I did was change the css task to use Sass instead. It also uses <code>cssnano</code> to minimize the resulting CSS. Then it writes it out to the &lsquo;static/generated-css&rsquo; directory instead of directly to public. This way I can check it in to Git, and Hugo will copy it to the output directory when it runs.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>gulp</span>.<span style=color:#a6e22e>task</span>(<span style=color:#e6db74>&#34;css&#34;</span>, <span style=color:#a6e22e>buildCss</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>buildCss</span>(<span style=color:#a6e22e>onError</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>gulp</span>.<span style=color:#a6e22e>src</span>(<span style=color:#e6db74>&#34;./src/css/*.*css&#34;</span>)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>pipe</span>(<span style=color:#a6e22e>sass</span>().<span style=color:#a6e22e>on</span>(<span style=color:#e6db74>&#39;error&#39;</span>, <span style=color:#a6e22e>onError</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>sass</span>.<span style=color:#a6e22e>logError</span>))
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>pipe</span>(<span style=color:#a6e22e>gulp</span>.<span style=color:#a6e22e>dest</span>(<span style=color:#e6db74>&#39;./static/generated-css&#39;</span>))
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>pipe</span>(<span style=color:#a6e22e>cssnano</span>().<span style=color:#a6e22e>on</span>(<span style=color:#e6db74>&#39;error&#39;</span>, <span style=color:#a6e22e>onError</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>gutil</span>.<span style=color:#a6e22e>log</span>))
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>pipe</span>(<span style=color:#a6e22e>rename</span>({ <span style=color:#a6e22e>suffix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;.min&#39;</span> }))
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>pipe</span>(<span style=color:#a6e22e>gulp</span>.<span style=color:#a6e22e>dest</span>(<span style=color:#e6db74>&#39;./static/generated-css&#39;</span>))
</span></span><span style=display:flex><span>  }
</span></span></code></pre></div><h4 id=using-webpack-to-transform-typescript-into-javascript>Using Webpack to transform Typescript into Javascript</h4><p>Then I changed the webpack config to use Typescript. The key part is using <a href=https://github.com/s-panferov/awesome-typescript-loader>awesome-typescript-loader</a> to compile the typescript so that Webpack can use it. Here&rsquo;s the relevant section of the webpack config file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>module:</span> {
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>loaders:</span> <span style=color:#960050;background-color:#1e0010>[</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>test:</span> <span style=color:#960050;background-color:#1e0010>/\.((png)|(eot)|(woff)|(woff2)|(ttf)|(svg)|(gif))(\?v=\d+\.\d+\.\d+)?$/,</span>
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>loader:</span> <span style=color:#f92672>&#34;file?name=/[hash].[ext]&#34;</span>
</span></span><span style=display:flex><span>    }<span style=color:#960050;background-color:#1e0010>,</span>
</span></span><span style=display:flex><span>    {<span style=color:#960050;background-color:#1e0010>test:</span> <span style=color:#960050;background-color:#1e0010>/\.json$/,</span> <span style=color:#960050;background-color:#1e0010>loader:</span> <span style=color:#f92672>&#34;json-loader&#34;</span>}<span style=color:#960050;background-color:#1e0010>,</span>
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>loader:</span> <span style=color:#f92672>&#34;babel-loader&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>test:</span> <span style=color:#960050;background-color:#1e0010>/\.js?$/,</span>
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>exclude:</span> <span style=color:#960050;background-color:#1e0010>/node_modules/,</span>
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>query:</span> <span style=color:#960050;background-color:#1e0010>{cacheDirectory:</span> <span style=color:#960050;background-color:#1e0010>true</span>}
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>},</span>
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>loaders:</span> <span style=color:#960050;background-color:#1e0010>[</span><span style=color:#f92672>&#34;babel-loader&#34;</span>, <span style=color:#f92672>&#34;awesome-typescript-loader&#34;</span><span style=color:#960050;background-color:#1e0010>]</span>,
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>test:</span> <span style=color:#960050;background-color:#1e0010>/\.tsx?$/,</span>
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>exclude:</span> <span style=color:#960050;background-color:#1e0010>/node_modules/</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>]</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>},</span>
</span></span></code></pre></div><p>Notice that you put the <code>babel-loader</code> in front of <code>awesome-typescript-loader</code> in the loader chain. This is because in this project the <code>tsconfig.json</code> file tells typescript to target the ES2015 version of Javascript, so we use babel in order to translate that version into older versions for older browsers.</p><p>The webpack config file also tells webpack to put the output file in the <code>static/generated-js</code> folder, for the same reason that the CSS goes there.</p><h4 id=preprocessing-images-with-gulp>Preprocessing images with gulp</h4><p>One thing to watch out for with a static site is your image size. Wordpress isn&rsquo;t there with a convenient plugin to prevent you from uploading a huge image. If you&rsquo;re not careful you can really blow up someone&rsquo;s mobile bandwidth with a gigantic 300 megabyte banner image. This is important for my use case especially because other people will be writing blog posts for this website, and if they upload a huge image I want to automatically have it be resized before it&rsquo;s put on the web.</p><p>Fortunately there&rsquo;s <a href=https://www.npmjs.com/package/gulp-image-resize>gulp-image-resize</a> and <a href=https://www.npmjs.com/package/gulp-imagemin>gulp-imagemin</a>. These libraries use ImageMagick to resize images inside a gulp task. I created <a href=https://gitlab.com/CruAlbaniaDigital/crualbaniadigital.gitlab.io/blob/master/gulp/image_tasks.babel.js>a separate file for the image tasks</a> which does the following steps:</p><ol><li>Scans for any new jpg, png, gif or svg files in <code>static/images/</code> and backs them up to <code>static/.original_images</code></li><li>For all the original-size images in <code>static/.original_images/</code>:</li><li>Checks if the image has already been processed, i.e. the corresponding file in <code>static/images/</code> is not the same size</li><li>If it&rsquo;s not already been processed, runs <code>imageResize</code> and <code>imagemin</code> to compress it down to 640px wide.</li></ol><p>After this task, the original images are stored in <code>static/.original_images/</code> and the ones in <code>static/images</code> are reprocessed and resized down to a reasonable size. Now, since the original images are also stored on the server, we can serve them up to the user if they have a screen big enough to make use of them. How do we determine that? Javascript!</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#39;img&#39;</span>).<span style=color:#a6e22e>each</span>(<span style=color:#66d9ef>function</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>attr</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>$</span>(<span style=color:#66d9ef>this</span>).<span style=color:#a6e22e>attr</span>(<span style=color:#e6db74>&#39;src&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>attr</span> <span style=color:#f92672>!==</span> <span style=color:#66d9ef>typeof</span> <span style=color:#66d9ef>undefined</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>attr</span> <span style=color:#a6e22e>as</span> <span style=color:#a6e22e>any</span> <span style=color:#f92672>!==</span> <span style=color:#66d9ef>false</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span>window.<span style=color:#a6e22e>matchMedia</span> <span style=color:#f92672>||</span> <span style=color:#f92672>!</span>window.<span style=color:#a6e22e>matchMedia</span>(<span style=color:#e6db74>&#39;(max-width: 640px)&#39;</span>).<span style=color:#a6e22e>matches</span>) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// This is not an iPhone, try to load the larger image
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>location</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>URI</span>(<span style=color:#a6e22e>attr</span>)
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>location</span>.<span style=color:#a6e22e>hostname</span>() <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>location</span>.<span style=color:#a6e22e>hostname</span>() <span style=color:#f92672>===</span> window.<span style=color:#a6e22e>location</span>.<span style=color:#a6e22e>hostname</span>) {
</span></span><span style=display:flex><span>            <span style=color:#75715e>// it&#39;s a locally sourced image, if it&#39;s in the /images/ directory load from /.original_images/ instead
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>path</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>location</span>.<span style=color:#a6e22e>path</span>().<span style=color:#a6e22e>split</span>(<span style=color:#e6db74>&#39;/&#39;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>path</span>[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;images&#39;</span>) {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>path</span>[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;.original_images&#39;</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>location</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>location</span>.<span style=color:#a6e22e>path</span>(<span style=color:#a6e22e>path</span>.<span style=color:#a6e22e>join</span>(<span style=color:#e6db74>&#39;/&#39;</span>))
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>src</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>location</span>.<span style=color:#a6e22e>normalize</span>().<span style=color:#a6e22e>href</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// preload with a detached Image element, and set it on the dom only if it succeedes.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>$this</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>$</span>(<span style=color:#66d9ef>this</span>)
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Image</span>()
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>i</span>.<span style=color:#a6e22e>onload</span> <span style=color:#f92672>=</span> () =&gt; {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>$this</span>.<span style=color:#a6e22e>attr</span>(<span style=color:#e6db74>&#39;src&#39;</span>, <span style=color:#a6e22e>src</span>)
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>i</span>.<span style=color:#a6e22e>onerror</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>ev</span>) =&gt; {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;Error prefetching image &#39;</span>, <span style=color:#a6e22e>location</span>, <span style=color:#a6e22e>ev</span>)
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>i</span>.<span style=color:#a6e22e>src</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>src</span>  <span style=color:#75715e>// start loading
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><p>This little baby is in <a href=https://gitlab.com/crualbaniadigital/crualbaniadigital.gitlab.io/blob/master/src/js/app.ts>src/js/app.ts</a> and runs over every <code>&lt;img ></code> tag. Using this line <code>window.matchMedia('(max-width: 640px)').matches</code> it checks if the current screen is wider than 640px. If it is, then it replaces all hrefs that point to <code>/images/</code> with ones that point to <code>/.original-images</code>. What this means is that phone screens which are less than 640px wide will only see the compressed images, while people on laptops and desktop computers will download the full image in all its glory. This way we don&rsquo;t blow up the bandwidth of phone users.</p><h4 id=heres-how-it-looks-when-you-run-gulp-to-build-the-site>Here&rsquo;s how it looks when you run Gulp to build the site</h4><p><img alt="gulp output gif" src=/images/modern_static_sites/gulp_output.gif></p><h2 id=conclusion>Conclusion</h2><p>Static site generators are great, and they get even greater when you combine them with Javascript and CSS preprocessors. Gulp is a great tool that can manage all 3, but you can really use any build system (even GNU Make) to link all these great tools together. Plus, in the end you can get free hosting on Github or Gitlab! So, next time you want to make a website with cool javascript functionality, use Hugo!</p></article></div></div><div class="col-sm-12 col-md-12 col-lg-3"><div id=stickySideBar class=sticky-sidebar><aside class=toc><h5>Table Of Contents</h5><div class=toc-content><nav id=TableOfContents><ul><li><a href=#building-a-website-the-fun-way>Building a website the fun way</a><ul><li></li><li><a href=#step-1-get-hugo-and-create-a-site>Step 1: get Hugo and create a site.</a></li><li><a href=#step-2-adding-content-and-images>Step 2: Adding content and images</a></li><li><a href=#step-3-adding-javascript-and-css>Step 3: Adding Javascript and CSS</a></li><li><a href=#step-4-building-and-hosting-the-site>Step 4: Building and hosting the site</a></li></ul></li><li><a href=#now-the-fun-part---spicing-up-the-javascript>Now the fun part - Spicing up the Javascript</a><ul><li></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></aside><aside class=tags><h5>Tags</h5><ul class="tags-ul list-unstyled list-inline"><li class=list-inline-item><a href=http://www.gordonburgett.net/tags/development target=_blank>development</a></li><li class=list-inline-item><a href=http://www.gordonburgett.net/tags/hugo target=_blank>hugo</a></li><li class=list-inline-item><a href=http://www.gordonburgett.net/tags/javascript target=_blank>javascript</a></li></ul></aside><aside class=social><h5>Social</h5><div class=social-content><ul class=list-inline><li class="list-inline-item text-center"><a target=_blank href="https://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2fwww.gordonburgett.net%2farchive%2f2017%2f04_modern_static_sites%2f"><i class="fab fa-linkedin"></i></a></li><li class="list-inline-item text-center"><a target=_blank href="https://twitter.com/share?text=Modern%20Static%20Sites&url=http%3a%2f%2fwww.gordonburgett.net%2farchive%2f2017%2f04_modern_static_sites%2f"><i class="fab fa-twitter"></i></a></li><li class="list-inline-item text-center"><a target=_blank href="https://api.whatsapp.com/send?text=Modern%20Static%20Sites: http%3a%2f%2fwww.gordonburgett.net%2farchive%2f2017%2f04_modern_static_sites%2f"><i class="fab fa-whatsapp"></i></a></li><li class="list-inline-item text-center"><a target=_blank href='mailto:?subject=Modern%20Static%20Sites&amp;body=Check%20out%20this%20site http%3a%2f%2fwww.gordonburgett.net%2farchive%2f2017%2f04_modern_static_sites%2f'><i class="fa fa-envelope"></i></a></li></ul></div></aside></div></div></div><div class=row><div class="col-sm-12 col-md-12 col-lg-9 p-4"></div></div></div><button class="p-2 px-3" onclick=topFunction() id=topScroll>
<i class="fas fa-angle-up"></i></button></section><div class=progress><div id=scroll-progress-bar class=progress-bar role=progressbar aria-valuenow=0 aria-valuemin=0 aria-valuemax=100></div></div><script src=/js/scrollProgressBar.js></script><script>var topScroll=document.getElementById("topScroll");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?topScroll.style.display="block":topScroll.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}let stickySideBarElem=document.getElementById("stickySideBar"),stickyNavBar=!1;if(stickyNavBar){let e=document.getElementById("profileHeader"),t=e.offsetHeight+15;stickySideBarElem.style.top=t+"px"}else stickySideBarElem.style.top="50px"</script><script src=/js/readingTime.js></script></div><footer><div class="text-center pt-2"></div><div class="container py-4"><div class="row justify-content-center"><div class="col-md-4 text-center">&copy; 2024 All Rights Reserved<div class=text-secondary>Made with
<span class=text-danger>&#10084;
</span>and
<a href=https://github.com/gurusabarish/hugo-profile target=_blank title="Designed and developed by gurusabarish">Hugo Profile</a></div></div></div></div></footer><script src=/bootstrap-5/js/bootstrap.bundle.min.js></script><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))});var tooltipTriggerList=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')),tooltipList=tooltipTriggerList.map(function(e){return new bootstrap.Tooltip(e)})</script><section id=search-content class=py-2><div class=container id=search-results></div></section></body></html>